{% extends "base.html" %}
{% import "bootstrap/wtf.html" as wtf %}
{% import "_macros.html" as macros %}

{% block title %}BugList - 首页{% endblock %}
    
{% block page_content %}
<div>
<div class="row">
<form class="form-inline">

<div class="form-group">
<label class="control-label" for="product">归属产品</label>
<select class="form-control" id="product" name="product">
	<option value="-1">全部</option>
	{% for p in products %}
	<option value="{{ p.id }}" {% if p.id == product_id %} selected="selected" {% endif %}>{{ p.title }}</option>
	{% endfor %}
</select> 
</div>
<div class="form-group">
<label class="control-label" for="progress">进展</label>
<select class="form-control" id="progress" name="progress">
	<option value="-1">不指定</option>
	{% for p in progs %}
	<option value="{{ p.id }}" {% if p.id == progress_id %} selected="selected" {% endif %}>{{ p.text }}</option>
	{% endfor %}
</select> 
</div>
<div class="form-group">
<button class="btn btn-primary">过滤</button>
</div>
</form>
</div>

<div class="row">
{% if bugs %}
  {% if bugs|length > 0 %}
  <table class="table table-hover">
    <thead>
    <tr><th>No.</th><th>产品</th><th>描述</th><th>状态</th></tr>
    </thead>
    <tbody>
    {% for bug in bugs %}
    <tr>
      <td><a href="{{ url_for('main.details', id=bug.id) }}", target="_blank">#{{ bug.id }}</a></td>
      <td>{{ bug.product.title }} </td>
      <td>{{ bug.text|summary }}</td>
      <td>{{ bug.progress.text }}</td>
    </tr>
    {% endfor %}
    </tbody>
  </table>
  
  <div class="alert alert-info">点击Bug编号，查看详情</div>
  <div class="pagination">
    {{ macros.pagination_widget(pagination, '.index', product=product_id, progress=progress_id) }}
  </div>

  {% endif %}
{% else %}
<div class="alert alert-info">无记录</div>
{% endif %}
</div>

</div>

{% endblock %}
